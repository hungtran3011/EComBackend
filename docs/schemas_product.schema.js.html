<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: schemas/product.schema.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: schemas/product.schema.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @name product.schema.js
 * @description Khi vận hành website bán hàng, việc đoán trước được cấu trúc dữ liệu của tất cả các danh mục là bất khả thi
 * Vì thế, sẽ cần 1 collection cho phép lưu trữ cấu trúc của các danh mục
 * Có thể tham khảo tại đây https://copilot.microsoft.com/shares/KThwGo1whr7kp6qd8s1L5
 */

import mongoose from "mongoose";

/**
 * @name FieldDefinitionSchema
 * @author hungtran3011
 * @description Định nghĩa cấu trúc của một trường dữ liệu trong sản phẩm hoặc danh mục
 * @type {mongoose.Schema}
 * @property {String} name - Tên của trường dữ liệu, bắt buộc phải có
 * @property {String} type - Kiểu dữ liệu của trường, bắt buộc phải có
 * - `String`: Chuỗi văn bản
 * - `Number`: Số
 * - `Date`: Ngày tháng
 * - `Boolean`: Giá trị đúng/sai
 * - `ObjectId`: ID tham chiếu đến đối tượng khác
 * - `Array`: Mảng dữ liệu
 * - `Mixed`: Dữ liệu hỗn hợp
 * @property {Boolean} required - Xác định trường dữ liệu có bắt buộc hay không, mặc định là false
 */
export const FieldDefinitionSchema = mongoose.Schema({
  name: { type: String, required: true },
  type: { 
    type: String, 
    required: true,
    enum: [
      'String', 
      'Number', 
      'Date', 
      'Boolean', 
      'ObjectId', 
      'Array', 
      'Mixed'
    ]
  },
  required: { type: Boolean, default: false },
});

/**
 * @name CategorySchema
 * @author hungtran3011
 * @description Định nghĩa cấu trúc của một danh mục sản phẩm
 * @type {mongoose.Schema}
 * @property {String} name - Tên danh mục, bắt buộc phải có
 * @property {String} description - Mô tả chi tiết về danh mục, không bắt buộc
 * @property {Array&lt;FieldDefinitionSchema>} fields - Danh sách các trường dữ liệu của danh mục
 * @property {mongoose.Schema.Types.ObjectId} createdBy - Tham chiếu đến người tạo danh mục
 */
export const CategorySchema = mongoose.Schema({
  name: { type: String, required: true },
  description: { type: String, required: false },
  fields: [FieldDefinitionSchema],
  createdBy: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },
});

/**
 * @name CategoryModel
 * @author hungtran3011
 * @type {mongoose.Model}
 * @description Model cho CategorySchema, cho phép thực hiện các thao tác CRUD trên danh mục
 */
const CategoryModel = mongoose.model(
  'Category', 
  CategorySchema
);

/**
 * @name ProductFieldValueSchema
 * @author hungtran3011
 * @description Schema lưu trữ giá trị của trường dữ liệu tùy chỉnh trong sản phẩm
 * @type {mongoose.Schema}
 * @property {String} name - Tên của trường dữ liệu, bắt buộc phải có
 * @property {mongoose.Schema.Types.Mixed} value - Giá trị của trường
 */
export const ProductFieldValueSchema = mongoose.Schema({
  name: { type: String, required: true },
  value: { type: mongoose.Schema.Types.Mixed, required: true },
});

/**
 * @name ProductSchema
 * @author hungtran3011
 * @description Định nghĩa cấu trúc của một sản phẩm trong hệ thống
 * @type {mongoose.Schema}
 * @property {String} name - Tên sản phẩm, bắt buộc phải có
 * @property {String} description - Mô tả chi tiết về sản phẩm, không bắt buộc
 * @property {Number} price - Giá sản phẩm, bắt buộc phải có
 * @property {mongoose.Schema.Types.ObjectId} category - Tham chiếu đến danh mục chứa sản phẩm, bắt buộc phải có
 * @property {Array&lt;ProductFieldValueSchema>} fieldValues - Danh sách các trường dữ liệu tùy chỉnh của sản phẩm
 * @property {mongoose.Schema.Types.ObjectId} createdBy - Tham chiếu đến người tạo sản phẩm
 * @property {Date} createdAt - Thời điểm tạo sản phẩm, mặc định là thời điểm hiện tại
 * @property {Date} updatedAt - Thời điểm cập nhật sản phẩm gần nhất, mặc định là thời điểm hiện tại
 */
export const ProductSchema = mongoose.Schema({
  name: { type: String, required: true },
  description: { type: String, required: false },
  price: { type: Number, required: true },
  category: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'Category', 
    required: true 
  },
  fieldValues: [ProductFieldValueSchema], // Replace fields with fieldValues
  createdBy: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },
}, {timestamps: true}) // Fix typo: timestamp -> timestamps

/**
 * @name ProductModel
 * @author hungtran3011
 * @type {mongoose.Model}
 * @description Model cho ProductSchema, cho phép thực hiện các thao tác CRUD trên sản phẩm
 */
const ProductModel = mongoose.model(
  'Product', 
  ProductSchema
);

export {ProductModel as Product, CategoryModel as Category};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CategoriesValidationSchema">CategoriesValidationSchema</a></li><li><a href="global.html#CategoryModel">CategoryModel</a></li><li><a href="global.html#CategorySchema">CategorySchema</a></li><li><a href="global.html#CategoryValidationSchema">CategoryValidationSchema</a></li><li><a href="global.html#FieldDefinitionSchema">FieldDefinitionSchema</a></li><li><a href="global.html#IPRateLimiter">IPRateLimiter</a></li><li><a href="global.html#OrderItem">OrderItem</a></li><li><a href="global.html#OrderItemModel">OrderItemModel</a></li><li><a href="global.html#OrderModel">OrderModel</a></li><li><a href="global.html#OrderSchema">OrderSchema</a></li><li><a href="global.html#PaginationValidation">PaginationValidation</a></li><li><a href="global.html#ProductFieldValueSchema">ProductFieldValueSchema</a></li><li><a href="global.html#ProductListValidationSchema">ProductListValidationSchema</a></li><li><a href="global.html#ProductModel">ProductModel</a></li><li><a href="global.html#ProductSchema">ProductSchema</a></li><li><a href="global.html#StorageItemModel">StorageItemModel</a></li><li><a href="global.html#UserSchema">UserSchema</a></li><li><a href="global.html#addToCart">addToCart</a></li><li><a href="global.html#adminMiddleware">adminMiddleware</a></li><li><a href="global.html#adminSignIn">adminSignIn</a></li><li><a href="global.html#cancelOrder">cancelOrder</a></li><li><a href="global.html#completeOrder">completeOrder</a></li><li><a href="global.html#createCategory">createCategory</a></li><li><a href="global.html#createCategoryService">createCategoryService</a></li><li><a href="global.html#createNonRegisteredUser">createNonRegisteredUser</a></li><li><a href="global.html#createOrder">createOrder</a></li><li><a href="global.html#createProduct">createProduct</a></li><li><a href="global.html#createProductService">createProductService</a></li><li><a href="global.html#deleteCartItem">deleteCartItem</a></li><li><a href="global.html#deleteCategory">deleteCategory</a></li><li><a href="global.html#deleteCategoryService">deleteCategoryService</a></li><li><a href="global.html#deleteProduct">deleteProduct</a></li><li><a href="global.html#deleteProductService">deleteProductService</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#formatFieldValues">formatFieldValues</a></li><li><a href="global.html#generateOTP">generateOTP</a></li><li><a href="global.html#getAllCategories">getAllCategories</a></li><li><a href="global.html#getAllCategoriesService">getAllCategoriesService</a></li><li><a href="global.html#getAllOrders">getAllOrders</a></li><li><a href="global.html#getAllProducts">getAllProducts</a></li><li><a href="global.html#getAllProductsService">getAllProductsService</a></li><li><a href="global.html#getAllUserCart">getAllUserCart</a></li><li><a href="global.html#getAllUsers">getAllUsers</a></li><li><a href="global.html#getCategoryById">getCategoryById</a></li><li><a href="global.html#getCategoryByIdService">getCategoryByIdService</a></li><li><a href="global.html#getOrderById">getOrderById</a></li><li><a href="global.html#getProductById">getProductById</a></li><li><a href="global.html#getProductByIdService">getProductByIdService</a></li><li><a href="global.html#getUserById">getUserById</a></li><li><a href="global.html#handleLogout">handleLogout</a></li><li><a href="global.html#handleRefreshToken">handleRefreshToken</a></li><li><a href="global.html#isValidMongoId">isValidMongoId</a></li><li><a href="global.html#isValidObjectIdWithOptions">isValidObjectIdWithOptions</a></li><li><a href="global.html#isValidSchemaObjectId">isValidSchemaObjectId</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#router">router</a></li><li><a href="global.html#saveOTP">saveOTP</a></li><li><a href="global.html#sendOTPByEmail">sendOTPByEmail</a></li><li><a href="global.html#signIn">signIn</a></li><li><a href="global.html#swaggerDocs">swaggerDocs</a></li><li><a href="global.html#updateCartItemQuantity">updateCartItemQuantity</a></li><li><a href="global.html#updateCategory">updateCategory</a></li><li><a href="global.html#updateCategoryService">updateCategoryService</a></li><li><a href="global.html#updateOrder">updateOrder</a></li><li><a href="global.html#updateProduct">updateProduct</a></li><li><a href="global.html#updateProductService">updateProductService</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#uploadRateLimiter">uploadRateLimiter</a></li><li><a href="global.html#userMiddleware">userMiddleware</a></li><li><a href="global.html#validateFieldType">validateFieldType</a></li><li><a href="global.html#verifyOTP">verifyOTP</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Mar 27 2025 08:36:07 GMT+0700 (Indochina Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
